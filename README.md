# Мониторинг устройств (Device Monitoring App)

Это полностековое приложение для мониторинга сессий пользователей и устройств. Оно позволяет отслеживать информацию о начале и окончании работы, а также версии используемого ПО.

## Технологический стек

### Бэкенд
- **Framework:** .NET 8 (ASP.NET Core Web API)
- **Database:** PostgreSQL 15
- **ORM:** Entity Framework Core (EF Core)
- **API Documentation:** Swagger / OpenAPI
- **Containerization:** Docker

### Фронтенд
- **Framework:** Angular 21
- **Styling:** CSS/LESS
- **Build Tool:** Angular CLI

## Структура проекта

Проект организован по принципам многослойной архитектуры:

- `back/infotecs.API` — уровень представления (контроллеры, настройки API).
- `back/infotecs.Application` — уровень бизнес-логики (сервисы).
- `back/infotecs.Core` — ядро системы (доменные модели, интерфейсы).
- `back/infotecs.DataAccess` — уровень доступа к данным (контекст БД, репозитории, миграции).
- `front` — клиентское приложение на Angular.

## Основные возможности

- Просмотр списка всех зарегистрированных сессий.
- Детальная статистика по конкретному устройству (общая длительность, средняя длительность, история сессий).
- Создание новых записей о сессиях (имя устройства/пользователя, время начала, время окончания, версия).
- Редактирование существующих записей.
- Удаление записей.

## API Эндпоинты

| Метод  | Эндпоинт     | Описание                                  |
| :----- | :----------- | :---------------------------------------- |
| GET    | `/User`      | Получить список всех сессий               |
| POST   | `/User`      | Создать новую запись о сессии             |
| PUT    | `/User/{id}` | Обновить информацию о существующей сессии |
| DELETE | `/User/{id}` | Удалить запись о сессии                   |

С полной спецификацией API можно ознакомиться через Swagger (при запуске в режиме разработки) или в файле `api-schema.json` в корне проекта.

## Запуск приложения

### С помощью Docker (рекомендуется)

Убедитесь, что у вас установлены Docker и Docker Compose.

1. Перейдите в корень проекта (там, где находится `docker-compose.yml`).
2. Запустите контейнеры:
   ```bash
   docker-compose up --build
   ```
3. Приложение будет доступно по адресам:
   - Фронтенд: [http://localhost:4200](http://localhost:4200)
   - Бэкенд API: [http://localhost:8080](http://localhost:8080)

### Локальный запуск (без Docker)

#### 1. База данных
- Установите и запустите PostgreSQL.
- Создайте базу данных `infotecsdb`.
- Обновите строку подключения в `back/infotecs.API/appsettings.json`.

#### 2. Бэкенд
1. Перейдите в папку `back`.
2. Восстановите зависимости и запустите:
   ```bash
   dotnet restore
   dotnet run --project infotecs.API
   ```
   Миграции будут применены автоматически при запуске.

#### 3. Фронтенд
1. Перейдите в папку `front`.
2. Установите зависимости:
   ```bash
   npm install
   ```
3. Запустите сервер разработки:
   ```bash
   npm start
   ```
   Фронтенд будет доступен по адресу `http://localhost:4200`.

## Разработка

Для генерации типов на основе схемы API во фронтенде используется скрипт (запускать из папки `front`):
```bash
npm run generate-api-schema
```
Файл `api-schema.json` сохраняется в корне проекта.
